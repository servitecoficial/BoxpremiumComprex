(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{71:function(e,t,n){"use strict";n.r(t),n.d(t,"CookieBanner",(function(){return B}));var o=n(3),r=n(6);function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e);var t,n,o,r=u(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),!(t=r.call(this,e)).isSupported_())throw new Error("Cookies not supported");return t.cookie_=t.global_.document.cookie,t}return t=i,(n=[{key:"isSupported_",value:function(){return this.global_.document&&"cookie"in this.global_.document}},{key:"save",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",r=this.generateKey_(e),i=n.toGMTString();return this.global_.document.cookie="".concat(r,"=").concat(t,"; expires=").concat(i,"; path=").concat(o),this.read(e)}},{key:"read",value:function(e){for(var t="".concat(this.generateKey_(e),"="),n=this.cookie_.split(";"),o=0;o<n.length;o++)if(n[o].indexOf(t)>-1)return n[o];return!1}},{key:"delete",value:function(e){this.cookie_="".concat(this.generateKey_(e),"=; ").concat("expires=Thu, 01 Jan 1970 00:00:01 GMT",'; path="/"')}}])&&a(t.prototype,n),o&&a(t,o),i}(function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.global_=t,this.prefix_="tv_",this.constructor===e)throw new TypeError("DAO is an abstract class. Please do not use directly.");if(void 0===this.isSupported_)throw new TypeError("DAO classes need to implement a isSupported_ method.");if(void 0===this.save)throw new TypeError("DAO classes need to implement a save method.");if(void 0===this.read)throw new TypeError("DAO classes need to implement a read method.");if(void 0===this.delete)throw new TypeError("DAO classes need to implement a delete method.")}var t,n,o;return t=e,(n=[{key:"generateKey_",value:function(e){return"".concat(this.prefix_).concat(e)}}])&&i(t.prototype,n),o&&i(t,o),e}()),h=n(4);function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"get",value:function(e,t){switch(e){case"short-term":return this.cookieStorageDao_=this.cookieStorageDao_||new p(t),this.cookieStorageDao_}}},{key:"getMockedDao_",value:function(){return{save:function(){return Object(h.a)("Saving into mocked DAO")},read:function(){return Object(h.a)("Reading from mocked DAO")},delete:function(){return Object(h.a)("Deleting from mocked DAO")}}}}],(n=null)&&y(t.prototype,n),o&&y(t,o),e}(),_=n(5);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j(e);if(t){var r=j(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=".cookie-banner__button",S="cookie-banner--show",T="GTVCC",P=365,N=24,R=60,A=60,x=1e3,B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(c,e);var t,n,r,i=w(c);function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e,t)).pageLocale_="",n.dao_=null,n.transitionDelay_=800,n.generateCookieName_=n.generateCookieName_.bind(C(n)),n.hideCookieBanner_=n.hideCookieBanner_.bind(C(n)),n.dispatchVisibilityEvent_=n.dispatchVisibilityEvent_.bind(C(n)),n}return t=c,(n=[{key:"initialize_",value:function(){var e,t;this.pageLocale_=(e=this.global_,""===(t=e.location.pathname.replace(/(.*intl\/)(.*?)|(\/.*)/gm,""))?"EN_US":t),this.dao_=b.get("short-term",this.global_),this.validateCookie_()}},{key:"validateCookie_",value:function(){var e=this.generateCookieName_();this.dao_.read(e)?(this.element.parentNode.removeChild(this.element),this.acceptCookieConsent_()):(this.subscriptions_=[[this.actions_.WINDOW_RESIZE_ENDED,this.dispatchVisibilityEvent_]],this.element.classList.add(S),this.setButtonConsentEvent_(),this.dispatchVisibilityEvent_(!0))}},{key:"setButtonConsentEvent_",value:function(){this.element.querySelector(D).addEventListener("click",this.hideCookieBanner_)}},{key:"hideCookieBanner_",value:function(e){var t=this;this.store_.dispatch(this.actions_.GA_TRACK_EVENT,{id:o.a.BUTTON,data:{gaConfig:e.target.dataset.gaConfig}}),this.store_.unsubscribe(this.actions_.WINDOW_RESIZE_ENDED,this.dispatchVisibilityEvent_),this.element.classList.remove(S),this.setCookie_(),this.dispatchVisibilityEvent_(!1),setTimeout((function(){t.element.parentNode.removeChild(t.element),t.acceptCookieConsent_()}),this.transitionDelay_)}},{key:"setCookie_",value:function(){var e=this.getCookieExpirationTime_();this.dao_.save(this.generateCookieName_(),"true",e)}},{key:"generateCookieName_",value:function(){return"".concat(T,"_").concat(this.pageLocale_.replace("-","_").toUpperCase())}},{key:"acceptCookieConsent_",value:function(){this.store_.state_=m(m({},this.store_.state),{},{isCookieConsentAccepted:!0})}},{key:"dispatchVisibilityEvent_",value:function(e){var t=this;Object(_.a)((function(){return t.element.offsetHeight})).then((function(n){t.store_.dispatch(t.actions_.COOKIE_BANNER_INTERACTION,{id:"cookie-banner-settings",isShown:e,cookieOffsetHeight:n})}))}},{key:"getCookieExpirationTime_",value:function(){var e=new Date,t=P*N*R*A*x,n=e.getTime()+t;return e.setTime(n),e}}])&&k(t.prototype,n),r&&k(t,r),c}(r.a)}}]);